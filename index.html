<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeatherCraft Atelier | Handcrafted Goods</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Tailwind is loaded via CDN (https://cdn.tailwindcss.com) so build directives (@tailwind / @apply)
           are not processed in the browser; replace them with standard CSS equivalents. */

        /* Custom Styles for Professional, Upscale Look */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #fcfcfc; /* Near White */
            color: #1c1c1c; /* Charcoal Black */
        }
        h1, h2, h3, h4 {
            font-family: 'Playfair Display', serif;
        }
        .container {
            max-width: 1300px;
        }
        /* Color Palette: #4A3222 (Espresso Brown), #A0522D (Aged Tan), #1c1c1c (Charcoal) */
        .text-primary { color: #4A3222; }
        .bg-primary { background-color: #4A3222; }
        .hover\:bg-primary-dark:hover { background-color: #3b281c; }

        /* Converted @apply utilities into plain CSS for browser usage */
        .btn-primary {
            background-color: #4A3222;
            color: #ffffff;
            font-weight: 600;
            padding: 0.75rem 1.5rem; /* py-3 px-6 */
            border-radius: 0.125rem; /* rounded-sm */
            transition: background-color 0.3s, box-shadow 0.3s;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
            letter-spacing: 0.04em; /* approximate tracking-wider */
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn-primary:hover {
            background-color: #3b281c;
        }

        .btn-secondary {
            background-color: #ffffff;
            border: 1px solid #d1d5db; /* gray-300 */
            color: #4b5563; /* gray-700 */
            font-weight: 600;
            padding: 0.75rem 1.5rem; /* py-3 px-6 */
            border-radius: 0.125rem; /* rounded-sm */
            transition: background-color 0.3s, color 0.3s;
            letter-spacing: 0.04em; /* approximate tracking-wider */
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn-secondary:hover {
            background-color: #f9fafb; /* gray-50 */
        }

        .product-card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.08);
        }
        /* Slideshow specific styles */
        .slideshow-item { display: none; }
        .slideshow-item.active { display: block; }
        .review-card {
            flex: 0 0 auto;
            width: 90%;
            margin-right: 2rem;
            scroll-snap-align: start; /* Ensure smooth snapping */
        }
        .review-slider-container {
            overflow-x: hidden; /* Hide scrollbar for cleaner auto-slide look */
            scroll-behavior: smooth;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header (Sleek and Minimal) -->
    <header class="bg-white shadow-sm sticky top-0 z-50 border-b border-gray-100">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- Brand Logo -->
            <a href="#home" class="text-3xl font-extrabold text-primary tracking-widest uppercase" style="font-family: 'Playfair Display', serif;">
                ATELIER
            </a>

            <!-- Navigation Links (Desktop) -->
            <nav class="hidden md:flex space-x-10 text-base font-medium tracking-wide">
                <a href="#about" class="hover:text-primary transition duration-150">About</a>
                <a href="#products" class="hover:text-primary transition duration-150">Products</a>
                <a href="#reviews" class="hover:text-primary transition duration-150">Review</a>
                <a href="#contact" class="hover:text-primary transition duration-150">Contact Us</a>
            </nav>

            <!-- Profile and Cart Icons -->
            <div class="flex space-x-6 items-center">
                <!-- Profile Logo (Simplified SVG for professional look) -->
                <button class="text-2xl text-gray-700 hover:text-primary transition duration-150" aria-label="User Profile">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                </button>
                <!-- Cart Logo -->
                <a href="#cart" class="relative text-2xl text-gray-700 hover:text-primary transition duration-150" aria-label="Shopping Cart">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                    <span id="cart-count" class="absolute -top-3 -right-3 text-xs bg-red-600 text-white rounded-full h-5 w-5 flex items-center justify-center font-bold">0</span>
                </a>
                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="md:hidden text-2xl text-gray-700 hover:text-primary">&#9776;</button>
            </div>
        </div>
        
        <!-- Mobile Navigation (Hidden by default) -->
        <nav id="mobile-menu" class="hidden md:hidden bg-gray-50 border-t border-gray-200">
            <a href="#home" class="block py-3 px-6 text-lg hover:bg-gray-100 border-b">Home</a>
            <a href="#products" class="block py-3 px-6 text-lg hover:bg-gray-100 border-b">Products</a>
            <a href="#reviews" class="block py-3 px-6 text-lg hover:bg-gray-100 border-b">Review</a>
            <a href="#contact" class="block py-3 px-6 text-lg hover:bg-gray-100">Contact Us</a>
        </nav>
    </header>

    <!-- Main Content Container (SPA View) -->
    <div id="app-container" class="flex-grow">
        <!-- Home View -->
        <section id="home-view" class="pt-8">
            
            <!-- 1. Slideshow (Hero Section - High Impact) -->
            <section class="mb-20">
                <div class="slideshow-container relative mx-auto container px-6 shadow-xl rounded-lg overflow-hidden">
                    <div id="slideshow" class="h-[60vh] md:h-[80vh] relative">
                        <!-- Slide 1: Focus on Craftsmanship (Updated with stock image) -->
                        <div class="slideshow-item active bg-cover bg-center h-full flex items-center justify-center" style="background-image: url('https://images.unsplash.com/photo-1543852786-1cf66249b657?q=80&w=1587&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'); background-position: center 60%;">
                            <div class="text-center p-8 rounded-lg bg-black bg-opacity-30">
                                <h2 class="text-5xl md:text-7xl font-light text-white mb-4 tracking-wider">
                                    Heirloom Quality. <br> Crafted by Hand.
                                </h2>
                                <p class="text-xl text-gray-200 mb-8 font-light tracking-widest uppercase">
                                    The new Fall-Winter Collection is here.
                                </p>
                                <a href="#products" class="btn-primary px-12 py-4 text-xl">Discover</a>
                            </div>
                        </div>
                        <!-- Slide 2: Focus on Bags (Updated with stock image) -->
                        <div class="slideshow-item bg-cover bg-center h-full flex items-center justify-start p-12 md:p-24" style="background-image: url('https://images.unsplash.com/photo-1594950293370-96f3c19e7a83?q=80&w=1587&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'); background-position: center 30%;">
                            <div class="text-left bg-black bg-opacity-50 p-8 rounded-lg max-w-lg">
                                <h2 class="text-4xl md:text-5xl font-bold text-white mb-4 tracking-tight">
                                    The Metropolitan Briefcase
                                </h2>
                                <p class="text-lg text-gray-200 mb-6">
                                    Full-grain calf leather, meticulously finished in Espresso.
                                </p>
                                <a href="#products?category=Bags" class="btn-secondary px-8 py-3 bg-white text-primary border-primary hover:bg-gray-100">Shop Bags</a>
                            </div>
                        </div>
                    </div>
                    <!-- Slide Indicators -->
                    <div id="slide-indicators" class="absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-3">
                        <!-- Indicators will be generated by JS -->
                    </div>
                </div>
            </section>

            <!-- 2. Categories (Simplified Grid - Updated with stock images) -->
            <section id="categories" class="container mx-auto px-6 mb-20">
                <h3 class="text-4xl font-light text-center mb-12 text-primary tracking-widest uppercase">The Collections</h3>
                <div class="grid grid-cols-2 md:grid-cols-5 gap-8">
                    <!-- Category Card Template -->
                    
                    <a href="#products?category=Leather+Goods" class="group block text-center shadow-lg rounded-sm overflow-hidden bg-white transition duration-300 hover:shadow-xl">
                        <img src="https://images.unsplash.com/photo-1517592750974-9b5d381023a1?q=80&w=400&auto=format&fit=crop" alt="Leather Goods" class="w-full h-48 object-cover object-center transition duration-500 group-hover:scale-105">
                        <div class="py-4 border-t border-gray-100">
                            <p class="font-semibold text-lg text-charcoal group-hover:text-primary tracking-wide">Leather Goods</p>
                        </div>
                    </a>

                    <a href="#products?category=Bags" class="group block text-center shadow-lg rounded-sm overflow-hidden bg-white transition duration-300 hover:shadow-xl">
                        <img src="https://images.unsplash.com/photo-1594950293370-96f3c19e7a83?q=80&w=400&auto=format&fit=crop" alt="Bags" class="w-full h-48 object-cover object-center transition duration-500 group-hover:scale-105">
                        <div class="py-4 border-t border-gray-100">
                            <p class="font-semibold text-lg text-charcoal group-hover:text-primary tracking-wide">Bags</p>
                        </div>
                    </a>

                    <a href="#products?category=Wallets" class="group block text-center shadow-lg rounded-sm overflow-hidden bg-white transition duration-300 hover:shadow-xl">
                        <img src="https://images.unsplash.com/photo-1579717148566-d4468f3a8b27?q=80&w=400&auto=format&fit=crop" alt="Wallets" class="w-full h-48 object-cover object-center transition duration-500 group-hover:scale-105">
                        <div class="py-4 border-t border-gray-100">
                            <p class="font-semibold text-lg text-charcoal group-hover:text-primary tracking-wide">Wallets</p>
                        </div>
                    </a>

                    <a href="#products?category=Shoes" class="group block text-center shadow-lg rounded-sm overflow-hidden bg-white transition duration-300 hover:shadow-xl">
                        <img src="https://images.unsplash.com/photo-1600293125270-4f938d41e779?q=80&w=400&auto=format&fit=crop" alt="Shoes" class="w-full h-48 object-cover object-center transition duration-500 group-hover:scale-105">
                        <div class="py-4 border-t border-gray-100">
                            <p class="font-semibold text-lg text-charcoal group-hover:text-primary tracking-wide">Shoes</p>
                        </div>
                    </a>

                    <a href="#products?category=Belts" class="group block text-center shadow-lg rounded-sm overflow-hidden bg-white transition duration-300 hover:shadow-xl">
                        <img src="https://images.unsplash.com/photo-1587570417242-4f362f6b8b0e?q=80&w=400&auto=format&fit=crop" alt="Belts" class="w-full h-48 object-cover object-center transition duration-500 group-hover:scale-105">
                        <div class="py-4 border-t border-gray-100">
                            <p class="font-semibold text-lg text-charcoal group-hover:text-primary tracking-wide">Belts</p>
                        </div>
                    </a>
                </div>
            </section>

            <!-- 3. Customer Reviews Slider (Auto-Sliding) -->
            <section id="reviews-section" class="bg-gray-100 py-16">
                <div class="container mx-auto px-6 relative group">
                    <h3 class="text-4xl font-light text-center mb-12 text-charcoal tracking-widest uppercase">Testimonials</h3>
                    
                    <div id="review-slider-wrapper" class="relative overflow-hidden">
                        <div id="review-slider" class="review-slider-container flex flex-nowrap pb-4 snap-x snap-mandatory">
                            <!-- Review Cards will be generated by JS -->
                        </div>
                    </div>

                    <!-- Navigation Buttons (Optional manual override) -->
                    <div class="flex justify-center mt-8 space-x-4">
                        <button onclick="scrollReviews(-1)" class="p-3 bg-white rounded-full shadow-lg text-primary hover:bg-primary hover:text-white transition duration-200 border border-gray-200" aria-label="Previous Review">&#9664;</button>
                        <button onclick="scrollReviews(1)" class="p-3 bg-white rounded-full shadow-lg text-primary hover:bg-primary hover:text-white transition duration-200 border border-gray-200" aria-label="Next Review">&#9654;</button>
                    </div>
                </div>
            </section>
        </section>
        
        <!-- Placeholder for Products and Cart Views -->
        <section id="products-view" class="container mx-auto px-6 py-16 hidden">
            <!-- Content will be rendered by renderProductsView() -->
        </section>

        <section id="cart-view" class="container mx-auto px-6 py-16 hidden">
            <!-- Content will be rendered by renderCartView() -->
        </section>
    </div>

    <!-- Footer (Dark, Rich, and Formal) -->
    <footer class="bg-[#1c1c1c] text-gray-400 py-12 mt-auto border-t border-gray-800" id="contact">
        <div class="container mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-10">
            <!-- Brand Info -->
            <div>
                <h4 class="text-2xl font-extrabold text-white mb-4 tracking-widest uppercase" style="font-family: 'Playfair Display', serif;">ATELIER</h4>
                <p class="text-sm">We craft pieces designed to last a lifetime, blending timeless design with sustainable practices. Located in the heart of Florence.</p>
            </div>

            <!-- Navigation Links -->
            <div>
                <h4 class="text-xl font-semibold text-white mb-4">Quick Links</h4>
                <ul class="space-y-2 text-sm">
                    <li><a href="#about" class="hover:text-primary transition duration-150">Our Heritage</a></li>
                    <li><a href="#products" class="hover:text-primary transition duration-150">Shop All</a></li>
                    <li><a href="#" class="hover:text-primary transition duration-150">Customer Support</a></li>
                    <li><a href="#contact" class="hover:text-primary transition duration-150">Visit Showroom</a></li>
                </ul>
            </div>

            <!-- Legal/Info Links -->
            <div>
                <h4 class="text-xl font-semibold text-white mb-4">Legal</h4>
                <ul class="space-y-2 text-sm">
                    <li><a href="#" class="hover:text-primary transition duration-150">Privacy Policy</a></li>
                    <li><a href="#" class="hover:text-primary transition duration-150">Terms of Service</a></li>
                    <li><a href="#" class="hover:text-primary transition duration-150">Shipping & Returns</a></li>
                </ul>
            </div>

            <!-- Newsletter/Review Input -->
            <div>
                <h4 class="text-xl font-semibold text-white mb-4">Leave a Review</h4>
                <p class="mb-4 text-sm">Join our newsletter for exclusive updates.</p>
                <form id="review-form" class="space-y-3">
                    <input type="email" placeholder="Email Address" required class="w-full p-3 rounded-sm bg-gray-800 text-white border border-gray-700 focus:outline-none focus:ring-1 focus:ring-primary">
                    <textarea placeholder="Your Feedback" required class="w-full p-3 rounded-sm bg-gray-800 text-white border border-gray-700 focus:outline-none focus:ring-1 focus:ring-primary h-16 resize-none"></textarea>
                    <button type="submit" class="btn-primary w-full text-sm">Submit</button>
                    <p id="review-message" class="text-sm text-green-400 mt-2 hidden"></p>
                </form>
                <!-- Social Handles -->
                <div class="flex space-x-4 text-xl mt-6">
                    <a href="#" class="hover:text-primary transition duration-150" aria-label="Instagram">&#x1F4F7;</a>
                    <a href="#" class="hover:text-primary transition duration-150" aria-label="Facebook">&#x1F4F1;</a>
                    <a href="#" class="hover:text-primary transition duration-150" aria-label="Pinterest">&#x1F4CD;</a>
                </div>
            </div>
        </div>
        <div class="text-center mt-10 pt-6 border-t border-gray-800">
            <p class="text-xs text-gray-500 tracking-wider">&copy; 2025 ATELIER. All rights reserved. | Made with intention.</p>
        </div>
    </footer>

    <script>
        // --- 1. Product Data and Definitions (Updated with Stock Images) ---
        const PRODUCTS = [
            // Leather Goods
            { id: 1, name: "Premium Cowhide Square", price: 85, category: "Leather Goods", material: "Cow", type: "Raw", image: "https://images.unsplash.com/photo-1517592750974-9b5d381023a1?q=80&w=300&auto=format&fit=crop" },
            { id: 2, name: "Goat Leather Panel", price: 70, category: "Leather Goods", material: "Goat", type: "Raw", image: "https://images.unsplash.com/photo-1542898730-176c4961917b?q=80&w=300&auto=format&fit=crop" },
            { id: 3, name: "Sheepskin Lining Fabric", price: 60, category: "Leather Goods", material: "Sheep", type: "Raw", image: "https://images.unsplash.com/photo-1621644781472-a89e9007f7c6?q=80&w=300&auto=format&fit=crop" },
            // Bags
            { id: 4, name: "Metropolitan Briefcase", price: 349, category: "Bags", type: "Briefcases", material: "Calf", image: "https://images.unsplash.com/photo-1525048560010-91a10058e5f7?q=80&w=300&auto=format&fit=crop" },
            { id: 5, name: "The Explorer Duffle", price: 289, category: "Bags", type: "Duffle bags", material: "Cow", image: "https://images.unsplash.com/photo-1588722629740-9b37c89f5c40?q=80&w=300&auto=format&fit=crop" },
            { id: 6, name: "Sleek Cross-body", price: 169, category: "Bags", type: "Cross-body bags", material: "Goat", image: "https://images.unsplash.com/photo-1574577546603-f1118d042211?q=80&w=300&auto=format&fit=crop" },
            // Wallets
            { id: 7, name: "Executive Card Holder", price: 45, category: "Wallets", type: "Card Holder", material: "Cow", image: "https://images.unsplash.com/photo-1579717148566-d4468f3a8b27?q=80&w=300&auto=format&fit=crop" },
            { id: 8, name: "Classic Bifold Wallet", price: 79, category: "Wallets", type: "Bifold", material: "Calf", image: "https://images.unsplash.com/photo-1594247864320-1b2c45f949c5?q=80&w=300&auto=format&fit=crop" },
            // Shoes
            { id: 9, name: "Hand-Stitched Oxford", price: 299, category: "Shoes", type: "Oxfords", material: "Calf", image: "https://images.unsplash.com/photo-1600293125270-4f938d41e779?q=80&w=300&auto=format&fit=crop" },
            { id: 10, name: "The Brogue Wingtip", price: 319, category: "Shoes", type: "Brogues", material: "Cow", image: "https://images.unsplash.com/photo-1549298916-b41d501d3627?q=80&w=300&auto=format&fit=crop" },
            // Belts
            { id: 11, name: "Full-Grain Dress Belt", price: 95, category: "Belts", type: "Dress Belt", material: "Cow", image: "https://images.unsplash.com/photo-1587570417242-4f362f6b8b0e?q=80&w=300&auto=format&fit=crop" },
            { id: 12, name: "Casual Suede Belt", price: 75, category: "Belts", type: "Suede Belt", material: "Sheep", image: "https://images.unsplash.com/photo-1596700548171-8727409f583f?q=80&w=300&auto=format&fit=crop" },
            // More Products
            { id: 13, name: "Travel Passport Wallet", price: 85, category: "Wallets", type: "Travel", material: "Goat", image: "https://images.unsplash.com/photo-1578947266100-30227289f032?q=80&w=300&auto=format&fit=crop" },
            { id: 14, name: "Ladies Mini Clutch", price: 129, category: "Bags", type: "Clutch", material: "Sheep", image: "https://images.unsplash.com/photo-1550005809-9080c51d6c0a?q=80&w=300&auto=format&fit=crop" },
        ];

        const REVIEWS = [
            { id: 1, name: "Alexander R.", rating: 5, text: "The Duffle Bag is an absolute masterpiece. The calf leather and stitching are unparalleled. A true investment piece." },
            { id: 2, name: "Sara K.", rating: 5, text: "My Oxford shoes are the most comfortable formal footwear I own. The craftsmanship shows in every detail. Highly recommended." },
            { id: 3, name: "Julian M.", rating: 4, text: "Got the Bifold Wallet. Exceptional quality, though the color was slightly darker than I expected. Still perfect." },
            { id: 4, name: "Chloe W.", rating: 5, text: "The Metropolitan Briefcase elevates my entire look. Elegant, functional, and built to last a lifetime. Worth every cent." },
            { id: 5, name: "James D.", rating: 5, text: "I ordered a custom belt and the leather quality is far superior to anything I've found in stores." },
        ];

        // --- 2. Cart Management (using LocalStorage) ---
        let cart = JSON.parse(localStorage.getItem('leatherCraftCart')) || [];

        function saveCart() {
            localStorage.setItem('leatherCraftCart', JSON.stringify(cart));
            updateCartCount();
            if (window.location.hash === '#cart') {
                renderCartView();
            }
        }

        function updateCartCount() {
            const count = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cart-count').textContent = count;
        }

        function addToCart(productId) {
            const product = PRODUCTS.find(p => p.id === productId);
            if (!product) return;

            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            saveCart();
            showToast(`${product.name} added to cart.`, 'success');
        }

        function updateCartItemQuantity(productId, newQuantity) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                const qty = parseInt(newQuantity);
                if (qty <= 0 || isNaN(qty)) {
                    cart = cart.filter(i => i.id !== productId);
                } else {
                    item.quantity = qty;
                }
                saveCart();
            }
        }

        function clearCart() {
            showConfirmationModal("Are you sure you want to empty your cart?", () => {
                cart = [];
                saveCart();
                renderCartView();
                showToast("Cart has been cleared.", 'info');
            });
        }
        
        // --- Custom Modal/Toast Functions ---
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.textContent = message;
            
            let color = 'bg-gray-800';
            if (type === 'success') color = 'bg-green-600';
            if (type === 'error') color = 'bg-red-600';

            toast.className = `fixed bottom-5 right-5 ${color} text-white px-5 py-3 rounded-md shadow-2xl z-[9999] transition duration-300 opacity-95`;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.classList.add('opacity-0');
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        }

        function showConfirmationModal(message, onConfirm) {
            const modalHTML = `
                <div id="custom-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000]">
                    <div class="bg-white p-8 rounded-lg shadow-2xl max-w-sm w-full">
                        <h4 class="text-xl font-semibold mb-4 text-primary">Confirmation</h4>
                        <p class="mb-6">${message}</p>
                        <div class="flex justify-end space-x-3">
                            <button id="modal-cancel" class="btn-secondary py-2 px-4 text-sm">Cancel</button>
                            <button id="modal-confirm" class="btn-primary py-2 px-4 text-sm">Confirm</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            const modal = document.getElementById('custom-modal');

            document.getElementById('modal-cancel').onclick = () => modal.remove();
            document.getElementById('modal-confirm').onclick = () => {
                onConfirm();
                modal.remove();
            };
        }


        // --- 3. View Rendering & Routing ---
        function router() {
            const hash = window.location.hash || '#home';
            const views = {
                'home': document.getElementById('home-view'),
                'products': document.getElementById('products-view'),
                'cart': document.getElementById('cart-view'),
                'about': document.getElementById('home-view'),
                'reviews': document.getElementById('home-view'),
                'contact': document.getElementById('home-view'),
            };
            
            Object.values(views).forEach(v => v.classList.add('hidden'));

            const viewKey = hash.split('?')[0].substring(1); 
            
            if (views[viewKey]) {
                views[viewKey].classList.remove('hidden');
            } else if (views['home']) {
                views['home'].classList.remove('hidden');
            }

            if (viewKey === 'products') {
                renderProductsView(hash);
            } else if (viewKey === 'cart') {
                renderCartView();
            }
            
            if (viewKey === 'reviews' || viewKey === 'contact' || viewKey === 'about') {
                const section = document.getElementById(viewKey === 'reviews' ? 'reviews-section' : viewKey);
                if (section) {
                    section.scrollIntoView({ behavior: 'smooth' });
                }
            }
        }

        // --- Products View Logic ---
        function renderProductsView(hash) {
            const container = document.getElementById('products-view');
            const params = new URLSearchParams(hash.split('?')[1] || '');
            const search = params.get('search') || '';
            const filterCategory = params.get('category') || 'All';
            const filterMaterial = params.get('material') || 'All';
            const sortBy = params.get('sort') || 'name-asc';

            let filteredProducts = PRODUCTS.filter(p => {
                const matchesSearch = p.name.toLowerCase().includes(search.toLowerCase());
                const matchesCategory = filterCategory === 'All' || p.category.includes(filterCategory);
                const matchesMaterial = filterMaterial === 'All' || p.material === filterMaterial;
                return matchesSearch && matchesCategory && matchesMaterial;
            });
            
            filteredProducts.sort((a, b) => {
                if (sortBy === 'price-asc') return a.price - b.price;
                if (sortBy === 'price-desc') return b.price - a.price;
                if (sortBy === 'name-asc') return a.name.localeCompare(b.name);
                return 0;
            });

            const allCategories = ['All', ...new Set(PRODUCTS.map(p => p.category))];
            const allMaterials = ['All', ...new Set(PRODUCTS.map(p => p.material))];
            
            const categoryOptions = allCategories.map(c => 
                `<option value="${c}" ${c === filterCategory ? 'selected' : ''}>${c.replace(/(\w)([A-Z])/g, '$1 $2')}</option>`
            ).join('');
            const materialOptions = allMaterials.map(m => 
                `<option value="${m}" ${m === filterMaterial ? 'selected' : ''}>${m}</option>`
            ).join('');
            const sortOptions = [
                { value: 'name-asc', label: 'Name (A-Z)' },
                { value: 'price-asc', label: 'Price (Low to High)' },
                { value: 'price-desc', label: 'Price (High to Low)' }
            ].map(opt => `<option value="${opt.value}" ${opt.value === sortBy ? 'selected' : ''}>${opt.label}</option>`).join('');

            container.innerHTML = `
                <h2 class="text-5xl font-light text-primary mb-12 text-center tracking-widest">ATELIER COLLECTIONS</h2>
                <div class="md:flex md:space-x-12">
                    <div class="md:w-1/4 mb-10 p-6 bg-white rounded-lg shadow-xl border border-gray-100 sticky top-24 self-start">
                        <h3 class="text-2xl font-semibold mb-6 border-b pb-3 text-charcoal">Filter & Sort</h3>
                        <div class="mb-6">
                            <label for="search-input" class="block font-medium mb-2 text-sm uppercase tracking-wider">Search</label>
                            <input type="text" id="search-input" placeholder="e.g. Briefcase" value="${search}" class="w-full p-3 border border-gray-300 rounded-sm focus:ring-primary focus:border-primary transition duration-150">
                        </div>
                        <div class="mb-6">
                            <label for="category-filter" class="block font-medium mb-2 text-sm uppercase tracking-wider">Category</label>
                            <select id="category-filter" class="w-full p-3 border border-gray-300 rounded-sm focus:ring-primary focus:border-primary appearance-none bg-white">
                                ${categoryOptions}
                            </select>
                        </div>
                        <div class="mb-6">
                            <label for="material-filter" class="block font-medium mb-2 text-sm uppercase tracking-wider">Leather Type</label>
                            <select id="material-filter" class="w-full p-3 border border-gray-300 rounded-sm focus:ring-primary focus:border-primary appearance-none bg-white">
                                ${materialOptions}
                            </select>
                        </div>
                        <div class="mb-8">
                            <label for="sort-filter" class="block font-medium mb-2 text-sm uppercase tracking-wider">Sort By</label>
                            <select id="sort-filter" class="w-full p-3 border border-gray-300 rounded-sm focus:ring-primary focus:border-primary appearance-none bg-white">
                                ${sortOptions}
                            </select>
                        </div>
                        <button id="apply-filters" class="btn-primary w-full">Apply Filters</button>
                    </div>

                    <div class="md:w-3/4">
                        <p class="text-right text-gray-600 mb-6">${filteredProducts.length} Results</p>
                        ${filteredProducts.length === 0 ? 
                            `<div class="text-center py-20 bg-white rounded-lg shadow-lg border border-gray-100">
                                <p class="text-xl text-gray-600">No products found matching your criteria.</p>
                                <a href="#products" class="text-primary hover:underline mt-4 block">Clear Filters</a>
                            </div>` 
                            :
                            `<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                                ${filteredProducts.map(p => `
                                    <div class="product-card bg-white p-6 rounded-lg shadow-lg flex flex-col justify-between border border-gray-100">
                                        <img src="${p.image}" alt="${p.name}" onerror="this.onerror=null; this.src='https://placehold.co/300x300/4A3222/ffffff?text=Image+Missing';" class="w-full h-auto rounded-sm mb-4 object-cover border border-gray-50 aspect-square">
                                        <div class="flex-grow">
                                            <p class="text-xs text-primary font-bold uppercase mb-1 tracking-widest">${p.category}</p>
                                            <h4 class="text-xl font-bold truncate mb-1">${p.name}</h4>
                                            <p class="text-sm text-gray-500 mb-4">${p.material} Leather</p>
                                        </div>
                                        <div class="flex justify-between items-center pt-4 border-t border-gray-100">
                                            <p class="text-2xl font-bold text-charcoal">$${p.price.toFixed(2)}</p>
                                            <button onclick="addToCart(${p.id})" class="btn-primary px-4 py-2 text-sm">Add to Cart</button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>`
                        }
                    </div>
                </div>
            `;

            const applyFiltersBtn = document.getElementById('apply-filters');
            applyFiltersBtn.onclick = () => {
                const newSearch = document.getElementById('search-input').value;
                const newCategory = document.getElementById('category-filter').value;
                const newMaterial = document.getElementById('material-filter').value;
                const newSort = document.getElementById('sort-filter').value;
                
                let newHash = '#products';
                const newParams = [];
                if (newSearch) newParams.push(`search=${encodeURIComponent(newSearch)}`);
                if (newCategory && newCategory !== 'All') newParams.push(`category=${encodeURIComponent(newCategory)}`);
                if (newMaterial && newMaterial !== 'All') newParams.push(`material=${encodeURIComponent(newMaterial)}`);
                if (newSort && newSort !== 'name-asc') newParams.push(`sort=${encodeURIComponent(newSort)}`);

                if (newParams.length > 0) {
                    newHash += '?' + newParams.join('&');
                }
                window.location.hash = newHash;
            };
        }

        // --- Cart View Logic ---
        function renderCartView() {
            const container = document.getElementById('cart-view');
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = subtotal > 300 || subtotal === 0 ? 0.00 : 25.00;
            const total = subtotal + shipping;

            let cartItemsHTML = cart.map(item => `
                <div class="flex flex-col md:flex-row items-start md:items-center justify-between border-b py-6 hover:bg-gray-50 transition duration-150 rounded-sm px-2 -mx-2">
                    <div class="flex items-center space-x-6 w-full md:w-3/5 mb-4 md:mb-0">
                        <img src="${item.image}" alt="${item.name}" class="w-24 h-24 object-cover rounded-sm border border-gray-100">
                        <div>
                            <h4 class="font-semibold text-xl">${item.name}</h4>
                            <p class="text-sm text-gray-500">${item.material} Leather | ${item.type}</p>
                            <p class="text-primary font-bold text-lg mt-1 block md:hidden">$${item.price.toFixed(2)}</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between md:justify-end w-full md:w-2/5">
                        <p class="text-primary font-bold text-lg hidden md:block w-20 text-right">$${item.price.toFixed(2)}</p>

                        <div class="flex items-center border border-gray-300 rounded-sm ml-4">
                            <button onclick="updateCartItemQuantity(${item.id}, ${item.quantity - 1})" class="p-2 text-xl hover:bg-gray-100 rounded-l-sm" aria-label="Decrease quantity">-</button>
                            <input type="number" min="1" value="${item.quantity}" onchange="updateCartItemQuantity(${item.id}, this.value)" class="w-12 text-center border-x border-gray-300 focus:outline-none font-medium">
                            <button onclick="updateCartItemQuantity(${item.id}, ${item.quantity + 1})" class="p-2 text-xl hover:bg-gray-100 rounded-r-sm" aria-label="Increase quantity">+</button>
                        </div>
                        
                        <p class="font-bold w-24 text-right ml-6 text-xl text-charcoal hidden sm:block">$${(item.price * item.quantity).toFixed(2)}</p>
                        
                        <button onclick="updateCartItemQuantity(${item.id}, 0)" class="text-red-500 hover:text-red-700 ml-6" aria-label="Remove item">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 7a1 1 0 011 1v7a1 1 0 11-2 0V8a1 1 0 011-1zm4 0a1 1 0 00-1 1v7a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </div>
            `).join('');

            if (cart.length === 0) {
                cartItemsHTML = `<p class="text-center text-xl py-20 text-gray-600">Your shopping bag is empty. <a href="#products" class="text-primary hover:underline font-semibold">Start browsing the collection.</a></p>`;
            }

            container.innerHTML = `
                <h2 class="text-5xl font-light text-primary mb-12 text-center tracking-widest">YOUR SHOPPING BAG</h2>
                <div class="md:grid md:grid-cols-3 md:gap-12">
                    <div class="md:col-span-2 bg-white p-8 rounded-lg shadow-xl border border-gray-100 mb-8 md:mb-0">
                        ${cartItemsHTML}
                    </div>

                    <div class="md:col-span-1">
                        <div class="bg-white p-8 rounded-lg shadow-xl border border-gray-100 sticky top-24">
                            <h3 class="text-2xl font-semibold mb-6 border-b pb-3">Order Summary</h3>
                            <div class="space-y-3 mb-6 text-gray-700">
                                <div class="flex justify-between">
                                    <span class="font-medium">Subtotal (${cart.length} items):</span>
                                    <span>$${subtotal.toFixed(2)}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="font-medium">Shipping:</span>
                                    <span class="${shipping === 0.00 && subtotal > 0 ? 'text-green-600 font-bold' : ''}">
                                        ${shipping > 0 ? `$${shipping.toFixed(2)}` : 'Complimentary'}
                                    </span>
                                </div>
                                <div class="flex justify-between font-bold text-xl pt-4 border-t border-gray-200 mt-4 text-charcoal">
                                    <span>Order Total:</span>
                                    <span>$${total.toFixed(2)}</span>
                                </div>
                            </div>
                            <button ${cart.length === 0 ? 'disabled' : ''} class="btn-primary w-full py-4 text-lg ${cart.length === 0 ? 'opacity-50 cursor-not-allowed' : ''}">
                                Secure Checkout
                            </button>
                            ${cart.length > 0 ? `<button onclick="clearCart()" class="w-full mt-4 text-sm text-gray-500 hover:text-red-500 transition duration-150">Empty Bag</button>` : ''}
                        </div>
                    </div>
                </div>
                ${subtotal > 0 && shipping > 0 ? `<p class="text-center text-sm text-gray-500 mt-8">Spend $${(300 - subtotal).toFixed(2)} more for complimentary shipping.</p>` : ''}
            `;
        }

        // --- 4. Slideshow & Review Slider Logic ---
        let slideIndex = 0;
        let reviewAutoScrollInterval;

        function showSlides(n) {
            const slides = document.querySelectorAll('.slideshow-item');
            const indicators = document.querySelectorAll('#slide-indicators button');

            if (slides.length === 0) return;

            if (n >= slides.length) slideIndex = 0;
            if (n < 0) slideIndex = slides.length - 1;

            slides.forEach(s => s.classList.remove('active'));
            indicators.forEach(i => i.classList.remove('bg-white', 'opacity-100'));
            indicators.forEach(i => i.classList.add('bg-gray-400', 'opacity-70'));
            
            slides[slideIndex].classList.add('active');
            indicators[slideIndex].classList.remove('bg-gray-400', 'opacity-70');
            indicators[slideIndex].classList.add('bg-white', 'opacity-100');
        }

        function autoSlide() {
            slideIndex++;
            showSlides(slideIndex);
            setTimeout(autoSlide, 5000); // Change image every 5 seconds
        }

        function createIndicators() {
            const slides = document.querySelectorAll('.slideshow-item');
            const container = document.getElementById('slide-indicators');
            slides.forEach((_, i) => {
                const btn = document.createElement('button');
                btn.className = 'w-3 h-3 rounded-full bg-gray-400 opacity-70 transition duration-300';
                btn.onclick = () => showSlides(i);
                container.appendChild(btn);
            });
            showSlides(0); // Initialize first slide
        }

        function renderReviews() {
            const slider = document.getElementById('review-slider');
            if (!slider) return;

            slider.innerHTML = REVIEWS.map(r => `
                <div class="review-card bg-white p-8 rounded-lg shadow-xl flex-shrink-0 snap-center border border-gray-100">
                    <div class="flex text-amber-500 mb-3 text-xl">
                        ${'&#9733;'.repeat(r.rating)}${'&#9734;'.repeat(5 - r.rating)}
                    </div>
                    <p class="text-gray-700 italic mb-5 leading-relaxed">"${r.text}"</p>
                    <p class="font-semibold text-right border-t pt-3 text-sm tracking-wider uppercase">${r.name}</p>
                </div>
            `).join('');
            
            // Start auto scroll after rendering
            startReviewAutoScroll();
            
            // Interaction listeners to pause/play
            const sliderWrapper = document.getElementById('reviews-section');
            sliderWrapper.addEventListener('mouseenter', stopReviewAutoScroll);
            sliderWrapper.addEventListener('mouseleave', startReviewAutoScroll);
        }

        function scrollReviews(direction) {
            const slider = document.getElementById('review-slider');
            if (!slider) return;
            const scrollDistance = slider.clientWidth * 0.95 * direction; 
            slider.scrollBy({ left: scrollDistance, behavior: 'smooth' });
        }

        // --- Auto-Slide Logic for Reviews ---
        function startReviewAutoScroll() {
            stopReviewAutoScroll(); // Clear any existing interval
            reviewAutoScrollInterval = setInterval(() => {
                const slider = document.getElementById('review-slider');
                if (!slider) return;
                
                const maxScrollLeft = slider.scrollWidth - slider.clientWidth;
                // If we are close to the end, loop back to start
                if (slider.scrollLeft >= maxScrollLeft - 5) {
                    slider.scrollTo({ left: 0, behavior: 'smooth' });
                } else {
                    // Scroll by approx one card width (90% + margin)
                    const cardWidth = slider.querySelector('.review-card').clientWidth;
                    const gap = 32; // 2rem margin
                    slider.scrollBy({ left: cardWidth + gap, behavior: 'smooth' });
                }
            }, 4000); // 4 seconds
        }

        function stopReviewAutoScroll() {
            clearInterval(reviewAutoScrollInterval);
        }

        // --- 5. Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize dynamic components on load
            createIndicators();
            autoSlide();
            renderReviews();
            updateCartCount();

            // Mobile Menu Toggle
            document.getElementById('mobile-menu-btn').addEventListener('click', () => {
                document.getElementById('mobile-menu').classList.toggle('hidden');
            });
            
            // SPA Routing
            window.addEventListener('hashchange', router);
            router(); 

            // Footer Review Form
            document.getElementById('review-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const messageEl = document.getElementById('review-message');
                messageEl.classList.remove('hidden');
                messageEl.textContent = "Thank you! Your feedback has been received.";
                messageEl.classList.add('text-green-400');

                setTimeout(() => {
                    messageEl.classList.add('hidden');
                    e.target.reset();
                }, 4000);
            });
        });
    </script>
</body>
</html>